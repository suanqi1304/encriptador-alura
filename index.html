<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encriptador Alura</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1 class="titulos-principales">Tu mensaje secreto üíå</h1>
    </header>
    <p class="mensaje-bienvenida">¬°Bienvenido! Este programa a continuaci√≥n te permite crear un mensaje secreto a partir de una encriptaci√≥n y viceversa. Recuerda solo usar min√∫sculas sin acentos. ¬°Disfr√∫talo! :).</p>
    <form name="programa" class="programa" onsubmit="event.preventDefault()">     
        <textarea cols="70" rows="10" type="text" class="input-padron" placeholder="Ingrese el texto aqu√≠" name="palabra" required></textarea>
        <div class="botones">
            <button onclick="encriptador()" class="boton">Encriptar</button>
            <button onclick="desencriptador()" class="boton">Desencriptar</button>
        </div>
        <div id="imageninicial">
            <p>Ning√∫n mensaje ha sido encontrado</p>
            <img src="Mu√±eco.png">        
        </div>
        <div>
            <textarea cols="70" rows="10" readonly="readonly" id="resultado" style="display: none;" class="resultado"></textarea>
            <button class="boton" style="display:none;" id="copiar">Copiar</button>
        </div>
    </form>
    <footer>
        <p>Desaf√≠o ONE - Grupo 3 - √Ångela Suaza - 2022</p>
    </footer>

    <script>
        function copy() {
            let copyText = document.querySelector("#resultado");
            copyText.select()
            document.execCommand("copy");
        }
        document.querySelector("#copiar").addEventListener("click", copy);

        function intercambiarContenido() {
            var x = document.getElementById('imageninicial');
            if (resultado.value=='none') {
                x.style.display = 'block';
            } 
            else {
                x.style.display = 'none';
            }
        }
        function encriptador(){
            var palabra=document.programa.palabra.value
            var palabranueva=""
            var resultado=document.getElementById('resultado')
            let boton=document.getElementById('copiar')
            for(var posicion=0;posicion<palabra.length;posicion++){
                if ((palabra[posicion]).charCodeAt()<97 || (palabra[posicion]).charCodeAt()>122){
                    palabranueva="Entrada inv√°lida ü•¥"
                    break
                }
                else if (palabra[posicion]=="a"){
                    palabranueva+="ai"
                }
                else if (palabra[posicion]=="e"){
                    palabranueva+="enter"
                }
                else if (palabra[posicion]=="i"){
                    palabranueva+="imes"
                }
                else if(palabra[posicion]=="o"){
                    palabranueva+="ober"
                }
                else if(palabra[posicion]=="u"){
                    palabranueva+="ufat"
                }
                else{
                    palabranueva+=palabra[posicion]
                }
            }
            intercambiarContenido()
            resultado.value=palabranueva
            resultado.style.display='flex'
            boton.style.display='flex'
            boton.style.margin='2em auto'
        }
        function desencriptador(){
            var palabra=document.programa.palabra.value
            var palabranueva=""
            var resultado=document.getElementById('resultado')
            var posicion=0
            while(posicion<palabra.length){
                if ((palabra[posicion]).charCodeAt()<97 || (palabra[posicion]).charCodeAt()>122){
                    palabranueva="Entrada inv√°lida"
                    break
                }
                else if (palabra[posicion]=="a" && palabra[posicion+1]=="i"){
                    palabranueva+="a"
                    posicion+=2
                }
                else if (palabra[posicion]=="e" && palabra[posicion+1]=="n" && palabra[posicion+2]=="t" 
                && palabra[posicion+3]=="e" && palabra[posicion+4]=="r"){
                    palabranueva+="e"
                    posicion+=5
                }
                else if (palabra[posicion]=="i" && palabra[posicion+1]=="m" && palabra[posicion+2]=="e" 
                && palabra[posicion+3]=="s"){
                    palabranueva+="i"
                    posicion+=4
                }
                else if(palabra[posicion]=="o" && palabra[posicion+1]=="b" && palabra[posicion+2]=="e" 
                && palabra[posicion+3]=="r"){
                    palabranueva+="o"
                    posicion+=4
                }
                else if(palabra[posicion]=="u" && palabra[posicion+1]=="f" && palabra[posicion+2]=="a" 
                && palabra[posicion+3]=="t"){
                    palabranueva+="u"
                    posicion+=4
                }
                else{
                    palabranueva+=palabra[posicion]
                    posicion++
                }
            }
            intercambiarContenido()
            resultado.value=palabranueva
            resultado.style.display='flex'
        }
    </script>
</body>
</html>